### Config File - This file contains the main settings for the similarity
### solution run with com1DFAPy


[GENERAL]
#+++++++++++++ Output++++++++++++
# desired result Parameters (ppr, pfd, pfv, FD, FV, P, particles) - separated by |
resType = FD|FV|Vx|Vy|Vz|particles
# saving time step, i.e.  time in seconds (first and last time step are always saved)
# option 1: give an interval with start:interval in seconds (tStep = 0:5 - this will save desired results every 5 seconds for the full simulation)
# option 2: explicitly list all desired time steps (closest to actual computational time step) separated by | (example tSteps = 1|50.2|100)
# NOTE: initial and last time step are always saved!
tSteps = 0:1

#++++++++++++++++ particle Initialisation +++++++++
# initial particle distribution, options: random, semirandom, uniform
# semirandom: particles are uniformly distributed with a little random variation
initPartDistType = random
# if true use file (import particles initial distribution from file)
initialiseParticlesFromFile = False
particleFile =
# seed for random generator
seed = 12345

#+++++++++SNOW properties
# release thickness
relTh = 4.


#++++++++++++Time stepping parameters
# fixed time step [s]
dt = 0.1
# End time [s]
tEnd = 5
# to use a variable time step (defined by the CFL number)
cflTimeStepping = False
# to use a variable time step (time step depends on kernel radius)
moussaTimeStepping = True
# courant number
cMax = 0.01
# number of iterations with constant time step set to dt at the beginning
cflIterConstant = 20
# to constrain the lower margin of the allowed time step
constrainCFL = False
# max time step in case of small velocities
maxdT = 0.5
# min time step in case of high velocity
mindT = 0.01

#+++++++++++++SPH parameters
# SPH gradient option
# 0) No pressure gradients computed
# 1) SamosAT style (no reprojecion on the surface, dz = 0 and gz is used)
# 2) SamostAt but done in the cartesian coord system (will hopefully allow us to add the earth pressure coef)
# 3) SamostAt but done in the local coord system (will hopefully allow us to add the earth pressure coef)
# and this time reprojecion on the surface, dz not 0 and g3 is used
sphOption = 2
# minimum SPH distance [m]
minRKern = 0.001
# sph kernel smoothing length [m]
sphKernelRadius = 3
# Choice of artificial viscosity
# 0) No artificial viscosity
# 1) SAMOS artificial viscosity
# 2) Ata artificial viscosity
viscOption = 1

#++++++++++++++++ Particles
# number of particles defined by: MPPDIR= mass per particle direct, MPPDH= mass per particles through release thickness,
# MPPKR= mass per particles through number of particles per kernel radius
massPerParticleDeterminationMethod = MPPKR
# mass per particle [kg] (if MPPDIR is used)
massPerPart = 1250
# release thickness per particle (if MPPDH is used)
deltaTh = 0.25
# number of particles per kernel radius (if MPPKR is used)
nPPK = 10
#|20|30|40|50|100|200
aPPK = -0.5
# for ref rKernel = 5 m
#cPPK = 5590.16994374947|8385.25491562421|11180.339887499
#cPPK = 2500|3750|5000
#cPPK = 1118.03398874989|1677.05098312484|2236.06797749979
#cPPK = 500|750|1000
#cPPK = 223.606797749979|335.410196624968|447.213595499958
#cPPK = 149.534878122122|224.302317183183|299.069756244244
#cPPK = 100|150|200
cPPK = 44.7213595499958|67.0820393249937|89.4427190999916

# for ref rKernel = 10 m
#cPPK = 31.6227766016838|63.2455532033676|94.8683298050514
#cPPK = 100|200|300
#cPPK = 177.827941003892|355.655882007785|533.483823011677
#cPPK = 316.227766016838|632.455532033676|948.683298050514
#cPPK = 1000|2000|3000
#cPPK = 3162.27766016838|6324.55532033676|9486.83298050514
#cPPK = 10000|20000|30000
#cPPK = 31622.7766016838|63245.5532033676|94868.3298050514
# splitting option
# either split particles based on mass (splitOption = 0)
# or split/merge in order to keep a constant number of particles per kernel radius(splitOption = 1)
splitOption = 0


#+++++++++++++Mesh and interpolation
# remesh the input DEM
# expected mesh size [m]
meshCellSize = 3

#+++++++++++++Flow model parameters+++++++++
# subgridMixingFactor
subgridMixingFactor = 10
# curvature acceleration coefficient
# take curvature term into account in the gravity acceleration term
# 0 if deactivated, 1 if activated
curvAcceleration = 1

#++++++++++++Friction model
# friction type (samosAT, Coulomb)
frictModel = Coulomb
# add the friction using an explicit formulation (1)
# 0 use an implicit method
explicitFriction = 1
#+++++++++++++SamosAt friction model
mu = 0.466307658

[VISUALISATION]
# if particle properties shall be exported to csv files - requires to save particles in OUTPUTS
writePartToCSV = False
# particle properties to be saved to csv (options: ux, uy, uz, velocityMagnitude,..)
particleProperties = velocityMagnitude|m


[FLAGS]
# True if dev release areas
flagDev = False
# specify a particular release area scenario, provide name of shapefile with or without extension .shp (optional)
releaseScenario =


[REPORT]
# which result parameters shall be included as plots in report,  - separated by |
plotFields =
# units for output variables
unitppr = kPa
unitpfd = m
unitpfv = ms-1

[ANALYSIS]
# parameter used for ordering the simulations - multiple possible; (e.g.relTh|deltaTh)
varParList = massPerPart|dt
# True if ascending ordering of simulations for varPar, False if descending order
ascendingOrder = False

[SIMISOL]
# dimensioning parameters
L_x = 80.
L_y = 80.

# bed friction angle
bedFrictionAngle = 25.
# internal friction angle
internalFrictionAngle = 25.
# plane inclination angle
planeinclinationAngle = 35.

# Flag earthpressure coefficients
# if false takes 1
flagEarth = False

# save analysis plots at time step dtSol
dtSol = 50.

# TODO still here user interaction
# user interaction for plots
flagInteraction = False
# which time step should be saved
tSave = 5
# should the relativ error be plotted?
relativError = True
